# üó∫Ô∏è System Map UI (Cockpit)

**Status:** Active
**Date:** 2026-01-19
**Scope:** Phase 12 Refactor

---

## core Routes (Verified)

| Route | Component File | Purpose |
|-------|----------------|---------|
| `/calculator` | `src/margenkalkulator/ui/Wizard.tsx` | **The Cockpit.** Primary tool for offer calculation. |
| `/` | `src/pages/Home.tsx` | Dashboard / Landing Page. Entry point. |
| `/offers` | `src/pages/Offers.tsx` | List of saved calculations. |
| `/offer/:id` | `src/pages/OfferDetail.tsx` | Read-only / Edit view of an offer. |

---

## The Cockpit Flow (`/calculator`)

**Current Structure:**
`Wizard.tsx` manages state (`option1`, `option2`) and renders:

1.  **Header Region:**
    *   `WizardProgress` (Steps indicator)
    *   `ViewModeToggle` (Customer/Dealer switch)
    *   `ActionMenu` (Save/Reset)

2.  **Work Area (Left/Center Column):**
    *   `StickyPriceBar` (Mini-summary when scrolling)
    *   **Accordion Steps:**
        1.  Hardware (`HardwareStep.tsx`)
        2.  Mobilfunk (`MobileStep.tsx`)
        3.  Festnetz (`FixedNetStep.tsx`) - *Conditional*
        4.  Kalkulation (`CompareStep.tsx`) - *Final View*

3.  **Live Summary (Right Rail - Desktop):**
    *   `SummarySidebar.tsx` (Totals, Margin, Provision)
    *   `OfferBasketPanel.tsx` (Multi-tariff basket)
    *   *Constraint: Hidden on mobile/tablet < lg*

4.  **Mobile Controls (Bottom Bar):**
    *   `FloatingActionBar.tsx` (Summary + CTA)

---

## User Goals & Interactions

| User Goal | Interaction | Key Challenge |
|-----------|-------------|---------------|
| **Create Standard Offer** | Select Tariff ‚Üí Add Hardware ‚Üí Check Margin | Must be < 60s without scroll hunting. |
| **Compare Options** | Toggle Option 1 / 2 ‚Üí Adjust inputs | Visual comparison is currently tab-based (hidden state). |
| **Present to Customer** | Switch "View Mode" ‚Üí Rotate Screen | "Der Tresor": preventing margin leaks during switch. |
| **Optimize Provision** | Tweak hardware price ‚Üí Watch margin impact | Immediate feedback loop needed (Summary visible). |

---

*Generated by Antigravity*
